model Equipment {
  id                    String                 @id @default(uuid())
  qrId                  String                 @unique
  name                  String
  description           String
  creationReason        String? // Reason for creating the equipment
  equipmentTag          EquipmentTags          @default(EQUIPMENT)
  state                 EquipmentState         @default(AVAILABLE)
  isDisabledByAdmin     Boolean                @default(false)
  approvalStatus        ApprovalStatus         @default(PENDING)
  createdAt             DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  overWeight            Boolean?               @default(false)
  currentWeight         Float?                 @default(0)
  EmployeeEquipmentLogs EmployeeEquipmentLog[]
  EquipmentHauled       EquipmentHauled[]
  equipmentVehicleInfo  EquipmentVehicleInfo?
  Maintenances          Maintenance[]
  TascoLogs             TascoLog[]
  TruckingLogs          TruckingLog[]
  DocumentTags          DocumentTag[]          @relation("DocumentTagToEquipment")
  createdById           String?
  createdBy             User?                  @relation(fields: [createdById], references: [id])
  createdVia            CreatedVia             @default(MOBILE)

  @@index([qrId])
  @@index([state, isDisabledByAdmin])
  @@index([approvalStatus])
}

model EquipmentVehicleInfo {
  id                     String    @id @default(uuid())
  make                   String?
  model                  String?
  year                   String?
  licensePlate           String?
  registrationExpiration DateTime?
  mileage                Int?
  Equipment              Equipment @relation(fields: [id], references: [id])
}

model EmployeeEquipmentLog {
  id            String       @id @default(uuid())
  timeSheetId   String // only need the connection to create a log which makes sense
  equipmentId   String?
  maintenanceId String? // a possible connection to EquipmentLog
  startTime     DateTime     @default(now()) // when creating a log, it starts now
  endTime       DateTime?
  comment       String?
  TimeSheet     TimeSheet    @relation(fields: [timeSheetId], references: [id], onDelete: Cascade)
  Equipment     Equipment?   @relation(fields: [equipmentId], references: [id])
  Maintenance   Maintenance? @relation(fields: [maintenanceId], references: [id], onDelete: Cascade) //connection to make a maintenance log
  RefuelLog     RefuelLog?

  @@index([timeSheetId, equipmentId, maintenanceId])
}
