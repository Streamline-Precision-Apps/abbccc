model Equipment {
  id                     String                 @id @default(cuid())
  qrId                   String                 @unique
  name                   String
  description            String
  equipmentTag           EquipmentTags          @default(EQUIPMENT)
  lastInspection         DateTime?
  nextInspection         DateTime?
  nextInspectionComment  String?
  lastRepair             DateTime?
  status                 EquipmentStatus        @default(OPERATIONAL)
  createdAt              DateTime               @default(now())
  updatedAt              DateTime               @updatedAt
  make                   String?
  model                  String?
  year                   String?
  licensePlate           String?
  registrationExpiration DateTime?
  mileage                Int?
  isActive               Boolean                @default(true)
  inUse                  Boolean                @default(false)
  overWeight             Boolean?               @default(false)
  currentWeight          Float?                 @default(0)
  employeeEquipmentLogs  EmployeeEquipmentLog[]
  EquipmentHauled        EquipmentHauled[]
  Maintenance            Maintenance[]
  TascoLogs              TascoLog[]
  TruckingLogs           TruckingLog[]

  @@index([qrId])
}

model EmployeeEquipmentLog {
  id            String     @id @default(cuid())
  equipmentId   String
  jobsiteId     String
  employeeId    String
  startTime     DateTime?
  endTime       DateTime?
  comment       String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  isFinished    Boolean    @default(false)
  status        FormStatus @default(PENDING)
  timeSheetId   String?
  tascoLogId    String?
  laborLogId    String?
  truckingLogId String?
  maintenanceId String?
  employee      User       @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  equipment     Equipment  @relation(fields: [equipmentId], references: [id])
  jobsite       Jobsite    @relation(fields: [jobsiteId], references: [qrId])
  timeSheets    TimeSheet? @relation(fields: [timeSheetId], references: [id])
  refueled      Refueled[]
}

model EquipmentHauled {
  id            String      @id @default(uuid())
  truckingLogId String
  equipmentId   String?
  recordedAt    DateTime    @default(now())
  createdAt     DateTime    @default(now())
  jobSiteId     String?
  equipment     Equipment?  @relation(fields: [equipmentId], references: [id])
  jobSite       Jobsite?    @relation(fields: [jobSiteId], references: [id], onDelete: Cascade)
  truckingLog   TruckingLog @relation(fields: [truckingLogId], references: [id])
}
